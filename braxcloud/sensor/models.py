from django.db import models
from ..cliente.models import Equipamento, Cliente, Planta, Setor


class Sensor(models.Model):

    DISJUNTOR_CHOICES = [
        ('E', 'Entrada'), ('S', 'Saída'), ('NE', 'Não Especificado')
    ]
    FASE_CHOICES = [
        ('R', 'R'), ('S', 'S'), ('T', 'T'), ('NE', 'Não Especificado')
    ]
    codigo = models.CharField(max_length=50)
    cliente = models.ForeignKey(Cliente, on_delete=models.CASCADE, null=True)
    planta = models.ForeignKey(Planta, on_delete=models.CASCADE, null=True)
    setor = models.ForeignKey(Setor, on_delete=models.CASCADE, null=True)
    equipamento = models.ForeignKey(Equipamento, on_delete=models.CASCADE, null=True)
    fase = models.CharField(max_length=2, choices=FASE_CHOICES)
    disjuntor = models.CharField(max_length=2, choices=DISJUNTOR_CHOICES)
    descricao = models.CharField(max_length=150)
    corrente = models.IntegerField(default=0, blank=True)

    class Meta:
        verbose_name = 'sensor'
        verbose_name_plural = 'sensores'

    def __str__(self):
        return self.codigo


class SensorTemp(models.Model):
    sensor = models.ForeignKey(
        Sensor, on_delete=models.CASCADE)
    datahora = models.DateTimeField()
    t = models.FloatField(default=0, blank=True, null=True)

    def save(self, *args, **kwargs):
            temperatura = ['0,0', '0,1', '0,2', '0,3', '0,4', '0,5', '0,6', '0,7', '0,8', '0,9', '1,0', '1,1', '1,2',
                           '1,3', '1,4', '1,5', '1,6', '1,7', '1,8', '1,9', '2,0', '2,1', '2,2', '2,3', '2,4', '2,5',
                           '2,6', '2,7', '2,8', '2,9', '3,0', '3,1', '3,2', '3,3', '3,4', '3,5', '3,6', '3,7', '3,8',
                           '3,9', '4,0', '4,1', '4,2', '4,3', '4,4', '4,5', '4,6', '4,7', '4,8', '4,9', '5,0', '5,1',
                           '5,2', '5,3', '5,4', '5,5', '5,6', '5,7', '5,8', '5,9', '6,0', '6,1', '6,2', '6,3', '6,4',
                           '6,5', '6,6', '6,7', '6,8', '6,9', '7,0', '7,1', '7,2', '7,3', '7,4', '7,5', '7,6', '7,7',
                           '7,8', '7,9', '8,0', '8,1', '8,2', '8,3', '8,4', '8,5', '8,6', '8,7', '8,8', '8,9', '9,0',
                           '9,1', '9,2', '9,3', '9,4', '9,5', '9,6', '9,7', '9,8', '9,9', '10,0', '10,1', '10,2',
                           '10,3', '10,4', '10,5', '10,6', '10,7', '10,8', '10,9', '11,0', '11,1', '11,2', '11,3',
                           '11,4', '11,5', '11,6', '11,7', '11,8', '11,9', '12,0', '12,1', '12,2', '12,3', '12,4',
                           '12,5', '12,6', '12,7', '12,8', '12,9', '13,0', '13,1', '13,2', '13,3', '13,4', '13,5',
                           '13,6', '13,7', '13,8', '13,9', '14,0', '14,1', '14,2', '14,3', '14,4', '14,5', '14,6',
                           '14,7', '14,8', '14,9', '15,0', '15,1', '15,2', '15,3', '15,4', '15,5', '15,6', '15,7',
                           '15,8', '15,9', '16,0', '16,1', '16,2', '16,3', '16,4', '16,5', '16,6', '16,7', '16,8',
                           '16,9', '17,0', '17,1', '17,2', '17,3', '17,4', '17,5', '17,6', '17,7', '17,8', '17,9',
                           '18,0', '18,1', '18,2', '18,3', '18,4', '18,5', '18,6', '18,7', '18,8', '18,9', '19,0',
                           '19,1', '19,2', '19,3', '19,4', '19,5', '19,6', '19,7', '19,8', '19,9', '20,0', '20,1',
                           '20,2', '20,3', '20,4', '20,5', '20,6', '20,7', '20,8', '20,9', '21,0', '21,1', '21,2',
                           '21,3', '21,4', '21,5', '21,6', '21,7', '21,8', '21,9', '22,0', '22,1', '22,2', '22,3',
                           '22,4', '22,5', '22,6', '22,7', '22,8', '22,9', '23,0', '23,1', '23,2', '23,3', '23,4',
                           '23,5', '23,6', '23,7', '23,8', '23,9', '24,0', '24,1', '24,2', '24,3', '24,4', '24,5',
                           '24,6', '24,7', '24,8', '24,9', '25,0', '25,1', '25,2', '25,3', '25,4', '25,5', '25,6',
                           '25,7', '25,8', '25,9', '26,0', '26,1', '26,2', '26,3', '26,4', '26,5', '26,6', '26,7',
                           '26,8', '26,9', '27,0', '27,1', '27,2', '27,3', '27,4', '27,5', '27,6', '27,7', '27,8',
                           '27,9', '28,0', '28,1', '28,2', '28,3', '28,4', '28,5', '28,6', '28,7', '28,8', '28,9',
                           '29,0', '29,1', '29,2', '29,3', '29,4', '29,5', '29,6', '29,7', '29,8', '29,9', '30,0',
                           '30,1', '30,2', '30,3', '30,4', '30,5', '30,6', '30,7', '30,8', '30,9', '31,0', '31,1',
                           '31,2', '31,3', '31,4', '31,5', '31,6', '31,7', '31,8', '31,9', '32,0', '32,1', '32,2',
                           '32,3', '32,4', '32,5', '32,6', '32,7', '32,8', '32,9', '33,0', '33,1', '33,2', '33,3',
                           '33,4', '33,5', '33,6', '33,7', '33,8', '33,9', '34,0', '34,1', '34,2', '34,3', '34,4',
                           '34,5', '34,6', '34,7', '34,8', '34,9', '35,0', '35,1', '35,2', '35,3', '35,4', '35,5',
                           '35,6', '35,7', '35,8', '35,9', '36,0', '36,1', '36,2', '36,3', '36,4', '36,5', '36,6',
                           '36,7', '36,8', '36,9', '37,0', '37,1', '37,2', '37,3', '37,4', '37,5', '37,6', '37,7',
                           '37,8', '37,9', '38,0', '38,1', '38,2', '38,3', '38,4', '38,5', '38,6', '38,7', '38,8',
                           '38,9', '39,0', '39,1', '39,2', '39,3', '39,4', '39,5', '39,6', '39,7', '39,8', '39,9',
                           '40,0', '40,1', '40,2', '40,3', '40,4', '40,5', '40,6', '40,7', '40,8', '40,9', '41,0',
                           '41,1', '41,2', '41,3', '41,4', '41,5', '41,6', '41,7', '41,8', '41,9', '42,0', '42,1',
                           '42,2', '42,3', '42,4', '42,5', '42,6', '42,7', '42,8', '42,9', '43,0', '43,1', '43,2',
                           '43,3', '43,4', '43,5', '43,6', '43,7', '43,8', '43,9', '44,0', '44,1', '44,2', '44,3',
                           '44,4', '44,5', '44,6', '44,7', '44,8', '44,9', '45,0', '45,1', '45,2', '45,3', '45,4',
                           '45,5', '45,6', '45,7', '45,8', '45,9', '46,0', '46,1', '46,2', '46,3', '46,4', '46,5',
                           '46,6', '46,7', '46,8', '46,9', '47,0', '47,1', '47,2', '47,3', '47,4', '47,5', '47,6',
                           '47,7', '47,8', '47,9', '48,0', '48,1', '48,2', '48,3', '48,4', '48,5', '48,6', '48,7',
                           '48,8', '48,9', '49,0', '49,1', '49,2', '49,3', '49,4', '49,5', '49,6', '49,7', '49,8',
                           '49,9', '50,0', '50,1', '50,2', '50,3', '50,4', '50,5', '50,6', '50,7', '50,8', '50,9',
                           '51,0', '51,1', '51,2', '51,3', '51,4', '51,5', '51,6', '51,7', '51,8', '51,9', '52,0',
                           '52,1', '52,2', '52,3', '52,4', '52,5', '52,6', '52,7', '52,8', '52,9', '53,0', '53,1',
                           '53,2', '53,3', '53,4', '53,5', '53,6', '53,7', '53,8', '53,9', '54,0', '54,1', '54,2',
                           '54,3', '54,4', '54,5', '54,6', '54,7', '54,8', '54,9', '55,0', '55,1', '55,2', '55,3',
                           '55,4', '55,5', '55,6', '55,7', '55,8', '55,9', '56,0', '56,1', '56,2', '56,3', '56,4',
                           '56,5', '56,6', '56,7', '56,8', '56,9', '57,0', '57,1', '57,2', '57,3', '57,4', '57,5',
                           '57,6', '57,7', '57,8', '57,9', '58,0', '58,1', '58,2', '58,3', '58,4', '58,5', '58,6',
                           '58,7', '58,8', '58,9', '59,0', '59,1', '59,2', '59,3', '59,4', '59,5', '59,6', '59,7',
                           '59,8', '59,9', '60,0', '60,1', '60,2', '60,3', '60,4', '60,5', '60,6', '60,7', '60,8',
                           '60,9', '61,0', '61,1', '61,2', '61,3', '61,4', '61,5', '61,6', '61,7', '61,8', '61,9',
                           '62,0', '62,1', '62,2', '62,3', '62,4', '62,5', '62,6', '62,7', '62,8', '62,9', '63,0',
                           '63,1', '63,2', '63,3', '63,4', '63,5', '63,6', '63,7', '63,8', '63,9', '64,0', '64,1',
                           '64,2', '64,3', '64,4', '64,5', '64,6', '64,7', '64,8', '64,9', '65,0', '65,1', '65,2',
                           '65,3', '65,4', '65,5', '65,6', '65,7', '65,8', '65,9', '66,0', '66,1', '66,2', '66,3',
                           '66,4', '66,5', '66,6', '66,7', '66,8', '66,9', '67,0', '67,1', '67,2', '67,3', '67,4',
                           '67,5', '67,6', '67,7', '67,8', '67,9', '68,0', '68,1', '68,2', '68,3', '68,4', '68,5',
                           '68,6', '68,7', '68,8', '68,9', '69,0', '69,1', '69,2', '69,3', '69,4', '69,5', '69,6',
                           '69,7', '69,8', '69,9', '70,0', '70,1', '70,2', '70,3', '70,4', '70,5', '70,6', '70,7',
                           '70,8', '70,9', '71,0', '71,1', '71,2', '71,3', '71,4', '71,5', '71,6', '71,7', '71,8',
                           '71,9', '72,0', '72,1', '72,2', '72,3', '72,4', '72,5', '72,6', '72,7', '72,8', '72,9',
                           '73,0', '73,1', '73,2', '73,3', '73,4', '73,5', '73,6', '73,7', '73,8', '73,9', '74,0',
                           '74,1', '74,2', '74,3', '74,4', '74,5', '74,6', '74,7', '74,8', '74,9', '75,0', '75,1',
                           '75,2', '75,3', '75,4', '75,5', '75,6', '75,7', '75,8', '75,9', '76,0', '76,1', '76,2',
                           '76,3', '76,4', '76,5', '76,6', '76,7', '76,8', '76,9', '77,0', '77,1', '77,2', '77,3',
                           '77,4', '77,5', '77,6', '77,7', '77,8', '77,9', '78,0', '78,1', '78,2', '78,3', '78,4',
                           '78,5', '78,6',
                           '78,7', '78,8', '78,9', '79,0', '79,1', '79,2', '79,3', '79,4', '79,5', '79,6', '79,7',
                           '79,8', '79,9', '80,0', '80,1', '80,2', '80,3', '80,4', '80,5', '80,6', '80,7', '80,8',
                           '80,9', '81,0', '81,1', '81,2', '81,3', '81,4', '81,5', '81,6', '81,7', '81,8', '81,9',
                           '82,0', '82,1', '82,2', '82,3', '82,4', '82,5', '82,6', '82,7', '82,8', '82,9', '83,0',
                           '83,1', '83,2', '83,3', '83,4', '83,5', '83,6', '83,7', '83,8', '83,9', '84,0', '84,1',
                           '84,2', '84,3', '84,4', '84,5', '84,6', '84,7', '84,8', '84,9', '85,0', '85,1', '85,2',
                           '85,3', '85,4', '85,5', '85,6', '85,7', '85,8', '85,9', '86,0', '86,1', '86,2', '86,3',
                           '86,4', '86,5', '86,6', '86,7', '86,8', '86,9', '87,0', '87,1', '87,2', '87,3', '87,4',
                           '87,5', '87,6', '87,7', '87,8', '87,9', '88,0', '88,1', '88,2', '88,3', '88,4', '88,5',
                           '88,6', '88,7', '88,8', '88,9', '89,0', '89,1', '89,2', '89,3', '89,4', '89,5', '89,6',
                           '89,7', '89,8', '89,9', '90,0', '90,1', '90,2', '90,3', '90,4', '90,5', '90,6', '90,7',
                           '90,8', '90,9', '91,0', '91,1', '91,2', '91,3', '91,4', '91,5', '91,6', '91,7', '91,8',
                           '91,9', '92,0', '92,1', '92,2', '92,3', '92,4', '92,5', '92,6', '92,7', '92,8', '92,9',
                           '93,0', '93,1', '93,2', '93,3', '93,4', '93,5', '93,6', '93,7', '93,8', '93,9', '94,0',
                           '94,1', '94,2', '94,3', '94,4', '94,5', '94,6', '94,7', '94,8', '94,9', '95,0', '95,1',
                           '95,2', '95,3', '95,4', '95,5', '95,6', '95,7', '95,8', '95,9', '96,0', '96,1', '96,2',
                           '96,3', '96,4', '96,5', '96,6', '96,7', '96,8', '96,9', '97,0', '97,1', '97,2', '97,3',
                           '97,4', '97,5', '97,6', '97,7', '97,8', '97,9', '98,0', '98,1', '98,2', '98,3', '98,4',
                           '98,5', '98,6', '98,7', '98,8', '98,9', '99,0', '99,1', '99,2', '99,3', '99,4', '99,5',
                           '99,6', '99,7', '99,8', '99,9', '100,0', '100,1', '100,2', '100,3', '100,4', '100,5',
                           '100,6', '100,7', '100,8', '100,9', '101,0', '101,1', '101,2', '101,3', '101,4', '101,5',
                           '101,6', '101,7', '101,8', '101,9', '102,0', '102,1', '102,2', '102,3', '102,4', '102,5',
                           '102,6', '102,7', '102,8', '102,9', '103,0', '103,1', '103,2', '103,3', '103,4', '103,5',
                           '103,6', '103,7', '103,8', '103,9', '104,0', '104,1', '104,2', '104,3', '104,4', '104,5',
                           '104,6', '104,7', '104,8', '104,9', '105,0', '105,1', '105,2', '105,3', '105,4', '105,5',
                           '105,6', '105,7', '105,8', '105,9', '106,0', '106,1', '106,2', '106,3', '106,4', '106,5',
                           '106,6', '106,7', '106,8', '106,9', '107,0', '107,1', '107,2', '107,3', '107,4', '107,5',
                           '107,6', '107,7', '107,8', '107,9', '108,0', '108,1', '108,2', '108,3', '108,4', '108,5',
                           '108,6', '108,7', '108,8', '108,9', '109,0', '109,1', '109,2', '109,3', '109,4', '109,5',
                           '109,6', '109,7', '109,8', '109,9', '110,0', '110,1', '110,2', '110,3', '110,4', '110,5',
                           '110,6', '110,7', '110,8', '110,9', '111,0', '111,1', '111,2', '111,3', '111,4', '111,5',
                           '111,6', '111,7', '111,8', '111,9', '112,0', '112,1', '112,2', '112,3', '112,4', '112,5',
                           '112,6', '112,7', '112,8', '112,9', '113,0', '113,1', '113,2', '113,3', '113,4', '113,5',
                           '113,6', '113,7', '113,8', '113,9', '114,0', '114,1', '114,2', '114,3', '114,4', '114,5',
                           '114,6', '114,7', '114,8', '114,9', '115,0', '115,1', '115,2', '115,3', '115,4', '115,5',
                           '115,6', '115,7', '115,8', '115,9', '116,0', '116,1', '116,2', '116,3', '116,4', '116,5',
                           '116,6', '116,7', '116,8', '116,9', '117,0', '117,1', '117,2', '117,3', '117,4', '117,5',
                           '117,6', '117,7', '117,8', '117,9', '118,0', '118,1', '118,2', '118,3', '118,4', '118,5',
                           '118,6', '118,7', '118,8', '118,9', '119,0', '119,1', '119,2', '119,3', '119,4', '119,5',
                           '119,6', '119,7', '119,8', '119,9', '120,0', '120,1', '120,2', '120,3', '120,4', '120,5',
                           '120,6', '120,7', '120,8', '120,9', '121,0', '121,1', '121,2', '121,3', '121,4', '121,5',
                           '121,6', '121,7', '121,8', '121,9', '122,0', '122,1', '122,2', '122,3', '122,4', '122,5',
                           '122,6', '122,7', '122,8', '122,9', '123,0', '123,1', '123,2', '123,3', '123,4', '123,5',
                           '123,6', '123,7', '123,8', '123,9', '124,0', '124,1', '124,2', '124,3', '124,4', '124,5',
                           '124,6', '124,7', '124,8', '124,9', '125,0', '125,1', '125,2', '125,3', '125,4', '125,5',
                           '125,6', '125,7', '125,8', '125,9', '126,0', '126,1', '126,2', '126,3', '126,4', '126,5',
                           '126,6', '126,7', '126,8', '126,9', '127,0', '127,1', '127,2', '127,3', '127,4', '127,5',
                           '127,6', '127,7', '127,8', '127,9', '128,0', '128,1', '128,2', '128,3', '128,4', '128,5',
                           '128,6', '128,7', '128,8', '128,9', '129,0', '129,1', '129,2', '129,3', '129,4', '129,5',
                           '129,6', '129,7', '129,8', '129,9', '130,0', '130,1', '130,2', '130,3', '130,4', '130,5',
                           '130,6', '130,7', '130,8', '130,9', '131,0', '131,1', '131,2', '131,3', '131,4', '131,5',
                           '131,6', '131,7', '131,8', '131,9', '132,0', '132,1', '132,2', '132,3', '132,4', '132,5',
                           '132,6', '132,7', '132,8', '132,9', '133,0', '133,1', '133,2', '133,3', '133,4', '133,5',
                           '133,6', '133,7', '133,8', '133,9', '134,0', '134,1', '134,2', '134,3', '134,4', '134,5',
                           '134,6', '134,7', '134,8', '134,9', '135,0', '135,1', '135,2', '135,3', '135,4', '135,5',
                           '135,6', '135,7', '135,8', '135,9', '136,0', '136,1', '136,2', '136,3', '136,4', '136,5',
                           '136,6', '136,7', '136,8', '136,9', '137,0', '137,1', '137,2', '137,3', '137,4', '137,5',
                           '137,6', '137,7', '137,8', '137,9', '138,0', '138,1', '138,2', '138,3', '138,4', '138,5',
                           '138,6', '138,7', '138,8', '138,9', '139,0', '139,1', '139,2', '139,3', '139,4', '139,5',
                           '139,6', '139,7', '139,8', '139,9', '140,0', '140,1', '140,2', '140,3', '140,4', '140,5',
                           '140,6', '140,7', '140,8', '140,9', '141,0', '141,1', '141,2', '141,3', '141,4', '141,5',
                           '141,6', '141,7', '141,8', '141,9', '142,0', '142,1', '142,2', '142,3', '142,4', '142,5',
                           '142,6', '142,7', '142,8', '142,9', '143,0', '143,1', '143,2', '143,3', '143,4', '143,5',
                           '143,6', '143,7', '143,8', '143,9', '144,0', '144,1', '144,2', '144,3', '144,4', '144,5',
                           '144,6', '144,7', '144,8', '144,9', '145,0', '145,1', '145,2', '145,3', '145,4', '145,5',
                           '145,6', '145,7', '145,8', '145,9', '146,0', '146,1', '146,2', '146,3', '146,4', '146,5',
                           '146,6', '146,7', '146,8', '146,9', '147,0', '147,1', '147,2', '147,3', '147,4', '147,5',
                           '147,6', '147,7', '147,8', '147,9', '148,0', '148,1', '148,2', '148,3', '148,4', '148,5',
                           '148,6', '148,7', '148,8', '148,9', '149,0', '149,1', '149,2', '149,3', '149,4', '149,5',
                           '149,6', '149,7', '149,8', '149,9', '150,0']

            resistencia = [32624, 32458, 32293, 32129, 31966, 31804, 31643, 31482, 31323, 31164, 31007, 30850, 30694,
                           30540, 30385, 30232, 30080, 29929, 29778, 29628, 29479, 29331, 29184, 29038, 28892, 28747,
                           28604, 28460, 28318, 28177, 28036, 27896, 27757, 27618, 27481, 27344, 27208, 27073, 26938,
                           26804, 26671, 26539, 26407, 26277, 26146, 26017, 25888, 25760, 25633, 25507, 25381, 25256,
                           25131, 25008, 24884, 24762, 24640, 24519, 24399, 24279, 24160, 24042, 23924, 23807, 23691,
                           23575, 23460, 23345, 23231, 23118, 23005, 22893, 22782, 22671, 22561, 22451, 22342, 22234,
                           22126, 22019, 21912, 21806, 21700, 21595, 21491, 21387, 21284, 21181, 21079, 20978, 20877,
                           20776, 20676, 20577, 20478, 20380, 20282, 20185, 20088, 19992, 19896, 19801, 19707, 19612,
                           19519, 19426, 19333, 19241, 19149, 19058, 18968, 18877, 18788, 18698, 18610, 18522, 18434,
                           18346, 18260, 18173, 18087, 18002, 17917, 17832, 17748, 17664, 17581, 17498, 17416, 17334,
                           17253, 17172, 17091, 17011, 16931, 16852, 16773, 16694, 16616, 16539, 16461, 16385, 16308,
                           16232, 16156, 16081, 16006, 15932, 15858, 15784, 15711, 15638, 15565, 15493, 15421, 15350,
                           15279, 15208, 15138, 15068, 14999, 14929, 14860, 14792, 14724, 14656, 14589, 14522, 14455,
                           14389, 14323, 14257, 14191, 14126, 14062, 13997, 13933, 13870, 13806, 13743, 13681, 13618,
                           13556, 13495, 13433, 13372, 13311, 13251, 13191, 13131, 13071, 13012, 12953, 12894, 12836,
                           12778, 12720, 12663, 12606, 12549, 12492, 12436, 12380, 12324, 12269, 12214, 12159, 12104,
                           12050, 11996, 11942, 11889, 11835, 11782, 11730, 11677, 11625, 11573, 11522, 11470, 11419,
                           11368, 11318, 11267, 11217, 11167, 11118, 11069, 11019, 10971, 10922, 10874, 10826, 10778,
                           10730, 10683, 10636, 10589, 10542, 10495, 10449, 10403, 10358, 10312, 10267, 10222, 10177,
                           10132, 10088, 10043, 10000, 9956, 9912, 9869, 9826, 9783, 9740, 9698, 9655, 9613, 9572, 9530,
                           9488, 9447, 9406, 9365, 9325, 9284, 9244, 9204, 9164, 9125, 9085, 9046, 9007, 8968, 8929,
                           8891, 8853, 8814, 8776, 8739, 8701, 8664, 8627, 8590, 8553, 8516, 8480, 8443, 8407, 8371,
                           8335, 8300, 8264, 8229, 8194, 8159, 8124, 8090, 8055, 8021, 7987, 7953, 7919, 7886, 7852,
                           7819, 7786, 7753, 7720, 7688, 7655, 7623, 7591, 7559, 7527, 7495, 7464, 7432, 7401, 7370,
                           7339, 7308, 7277, 7247, 7217, 7186, 7156, 7126, 7096, 7067, 7037, 7008, 6979, 6950, 6921,
                           6892, 6863, 6835, 6806, 6778, 6750, 6722, 6694, 6666, 6638, 6611, 6584, 6556, 6529, 6502,
                           6475, 6449, 6422, 6396, 6369, 6343, 6317, 6291, 6265, 6239, 6214, 6188, 6163, 6138, 6112,
                           6087, 6062, 6038, 6013, 5988, 5964, 5940, 5915, 5891, 5867, 5843, 5820, 5796, 5772, 5749,
                           5726, 5702, 5679, 5656, 5633, 5611, 5588, 5565, 5543, 5520, 5498, 5476, 5454, 5432, 5410,
                           5388, 5366, 5345, 5323, 5302, 5281, 5260, 5238, 5217, 5197, 5176, 5155, 5134, 5114, 5093,
                           5073, 5053, 5033, 5013, 4993, 4973, 4953, 4933, 4914, 4894, 4875, 4855, 4836, 4817, 4798,
                           4779, 4760, 4741, 4722, 4704, 4685, 4667, 4648, 4630, 4612, 4594, 4575, 4557, 4540, 4522,
                           4504, 4486, 4469, 4451, 4434, 4416, 4399, 4382, 4365, 4348, 4331, 4314, 4297, 4280, 4264,
                           4247, 4230, 4214, 4198, 4181, 4165, 4149, 4133, 4117, 4101, 4085, 4069, 4053, 4038, 4022,
                           4007, 3991, 3976, 3960, 3945, 3930, 3915, 3900, 3885, 3870, 3855, 3840, 3825, 3811, 3796,
                           3782, 3767, 3753, 3738, 3724, 3710, 3696, 3682, 3668, 3654, 3640, 3626, 3612, 3598, 3585,
                           3571, 3557, 3544, 3530, 3517, 3504, 3490, 3477, 3464, 3451, 3438, 3425, 3412, 3399, 3386,
                           3374, 3361, 3348, 3336, 3323, 3311, 3298, 3286, 3273, 3261, 3249, 3237, 3225, 3213, 3201,
                           3189, 3177, 3165, 3153, 3141, 3130, 3118, 3106, 3095, 3083, 3072, 3060, 3049, 3038, 3026,
                           3015, 3004, 2993, 2982, 2971, 2960, 2949, 2938, 2927, 2916, 2906, 2895, 2884, 2874, 2863,
                           2852, 2842, 2831, 2821, 2811, 2800, 2790, 2780, 2770, 2760, 2750, 2739, 2729, 2719, 2710,
                           2700, 2690, 2680, 2670, 2661, 2651, 2641, 2632, 2622, 2613, 2603, 2594, 2584, 2575, 2566,
                           2556, 2547, 2538, 2529, 2519, 2510, 2501, 2492, 2483, 2474, 2465, 2457, 2448, 2439, 2430,
                           2421, 2413, 2404, 2396, 2387, 2378, 2370, 2361, 2353, 2345, 2336, 2328, 2320, 2311, 2303,
                           2295, 2287, 2278, 2270, 2262, 2254, 2246, 2238, 2230, 2222, 2215, 2207, 2199, 2191, 2183,
                           2176, 2168, 2160, 2153, 2145, 2138, 2130, 2123, 2115, 2108, 2100, 2093, 2085, 2078, 2071,
                           2064, 2056, 2049, 2042, 2035, 2028, 2021, 2014, 2007, 2000, 1993, 1986, 1979, 1972, 1965,
                           1958, 1951, 1945, 1938, 1931, 1924, 1918, 1911, 1904,
                           1898, 1891, 1885, 1878, 1872, 1865, 1859, 1852, 1846, 1840, 1833, 1827, 1821, 1814, 1808,
                           1802, 1796, 1790, 1783, 1777, 1771, 1765, 1759, 1753, 1747, 1741, 1735, 1729, 1723, 1718,
                           1712, 1706, 1700, 1694, 1688, 1683, 1677, 1671, 1666, 1660, 1654, 1649, 1643, 1638, 1632,
                           1627, 1621, 1616, 1610, 1605, 1599, 1594, 1588, 1583, 1578, 1573, 1567, 1562, 1557, 1551,
                           1546, 1541, 1536, 1531, 1526, 1521, 1515, 1510, 1505, 1500, 1495, 1490, 1485, 1480, 1475,
                           1471, 1466, 1461, 1456, 1451, 1446, 1441, 1437, 1432, 1427, 1422, 1418, 1413, 1408, 1404,
                           1399, 1394, 1390, 1385, 1381, 1376, 1372, 1367, 1363, 1358, 1354, 1349, 1345, 1340, 1336,
                           1331, 1327, 1323, 1318, 1314, 1310, 1306, 1301, 1297, 1293, 1289, 1284, 1280, 1276, 1272,
                           1268, 1264, 1259, 1255, 1251, 1247, 1243, 1239, 1235, 1231, 1227, 1223, 1219, 1215, 1211,
                           1207, 1204, 1200, 1196, 1192, 1188, 1184, 1180, 1177, 1173, 1169, 1165, 1162, 1158, 1154,
                           1150, 1147, 1143, 1139, 1136, 1132, 1129, 1125, 1121, 1118, 1114, 1111, 1107, 1104, 1100,
                           1097, 1093, 1090, 1086, 1083, 1079, 1076, 1072, 1069, 1066, 1062, 1059, 1056, 1052, 1049,
                           1046, 1042, 1039, 1036, 1032, 1029, 1026, 1023, 1019, 1016, 1013, 1010, 1007, 1004, 1000,
                           997, 994, 991, 988, 985, 982, 979, 976, 973, 970, 967, 964, 961, 958, 955, 952, 949, 946,
                           943, 940, 937, 934, 931, 928, 925, 922, 920, 917, 914, 911, 908, 905, 903, 900, 897, 894,
                           892, 889, 886, 883, 881, 878, 875, 873, 870, 867, 865, 862, 859, 857, 854, 851, 849, 846,
                           844, 841, 839, 836, 833, 831, 828, 826, 823, 821, 818, 816, 813, 811, 808, 806, 804, 801,
                           799, 796, 794, 791, 789, 787, 784, 782, 780, 777, 775, 773, 770, 768, 766, 763, 761, 759,
                           756, 754, 752, 750, 747, 745, 743, 741, 739, 736, 734, 732, 730, 728, 725, 723, 721, 719,
                           717, 715, 713, 710, 708, 706, 704, 702, 700, 698, 696, 694, 692, 690, 688, 686, 684, 682,
                           680, 678, 676, 674, 672, 670, 668, 666, 664, 662, 660, 658, 656, 654, 652, 650, 648, 646,
                           645, 643, 641, 639, 637, 635, 633, 632, 630, 628, 626, 624, 622, 621, 619, 617, 615, 613,
                           612, 610, 608, 606, 605, 603, 601, 599, 598, 596, 594, 593, 591, 589, 587, 586, 584, 582,
                           581, 579, 577, 576, 574, 572, 571, 569, 567, 566, 564, 563, 561, 559, 558, 556, 555, 553,
                           552, 550, 548, 547, 545, 544, 542, 541, 539, 538, 536, 535, 533, 532, 530, 528, 527, 526,
                           524, 523, 521, 520, 518, 517, 515, 514, 512, 511, 509, 508, 507, 505, 504, 502, 501, 500,
                           498, 497, 495, 494, 493, 491, 490, 488, 487, 486, 484, 483, 482, 480, 479, 478, 476, 475,
                           474, 472, 471, 470, 468, 467, 466, 465, 463, 462, 461, 460, 458, 457, 456, 454, 453, 452,
                           451, 449, 448, 447, 446, 445, 443, 442, 441, 440, 438, 437, 436, 435, 434, 433, 431, 430,
                           429, 428, 427, 425, 424, 423, 422, 421, 420, 419, 417, 416, 415, 414, 413, 412, 411, 410,
                           408, 407, 406, 405, 404, 403, 402, 401, 400, 399, 398, 397, 395, 394, 393, 392, 391, 390,
                           389, 388, 387, 386, 385, 384, 383, 382, 381, 380, 379, 378, 377, 376, 375, 374, 373, 372,
                           371, 370, 369, 368, 367, 366, 365, 364, 363, 362, 361, 360, 359, 358, 357, 356, 355, 354,
                           353, 353, 352, 351, 350, 349, 348, 347, 346, 345, 344, 343, 342, 342, 341, 340, 339, 338,
                           337, 336, 335, 334, 334, 333, 332, 331, 330, 329, 328, 328, 327, 326, 325, 324, 323, 322,
                           322, 321, 320, 319, 318, 318, 317, 316, 315, 314, 313, 313, 312, 311, 310, 309, 309, 308,
                           307, 306, 305, 305, 304, 303, 302, 302, 301, 300, 299, 298, 298, 297, 296, 295, 295, 294,
                           293, 292, 292, 291, 290, 289, 289, 288, 287, 286, 286, 285, 284, 284, 283, 282, 281, 281,
                           280, 279, 279, 278, 277, 276, 276, 275, 274, 274, 273, 272, 272, 271, 270, 270, 269, 268,
                           268, 267, 266, 266, 265, 264, 264, 263, 262, 262, 261, 260, 260, 259, 258, 258, 257, 256,
                           256, 255, 254, 254, 253, 253, 252, 251, 251, 250, 249, 249, 248, 248, 247, 246, 246, 245,
                           245, 244, 243, 243, 242, 242, 241, 240, 240, 239, 239, 238, 237, 237, 236, 236, 235, 234,
                           234, 233, 233, 232, 232, 231, 230, 230, 229, 229, 228, 228, 227, 227, 226, 225, 225, 224,
                           224, 223, 223, 222, 222, 221, 221, 220, 219, 219, 218, 218, 217, 217, 216, 216, 215, 215,
                           214, 214, 213, 213, 212, 212, 211, 211, 210, 210, 209, 209, 208, 208, 207, 207, 206, 206,
                           205, 205, 204, 204, 203, 203, 202, 202, 201, 201, 200, 200, 199, 199, 198, 198, 197, 197,
                           196, 196, 196, 195, 195, 194, 194, 193, 193, 192, 192, 191, 191, 191, 190, 190, 189, 189,
                           188, 188, 187, 187, 186, 186, 186, 185, 185, 184, 184, 183, 183, 183, 182, 182, 181, 181]

            self.t = (10000 * (1 / ((3300 / self.t) - 1)))
            res = list(map(lambda i: i < self.t, resistencia)).index(True)
            self.t = float(temperatura[res].replace(',', '.'))
            super().save(*args, **kwargs)

    class Meta:
        get_latest_by = ['datahora']

    def __str__(self):
        return str(self.sensor)


class SensorDPU(models.Model):
    sensor = models.ForeignKey(
        Sensor, on_delete=models.CASCADE)
    datahora = models.DateTimeField()
    t = models.FloatField(default=0)
    h = models.FloatField(default=0)
    f60 = models.FloatField(max_length=10)
    mcnt = models.FloatField(max_length=10)

    class Meta:
        get_latest_by = ['datahora']

    def __str__(self):
        return str(self.sensor)



